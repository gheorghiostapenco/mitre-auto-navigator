version: '3.8'

services:
  navigator:
    # Build the image using the Dockerfile in the ../docker directory
    build:
      context: ..
      dockerfile: docker/Dockerfile.navigator
    container_name: mitre_navigator
    ports:
      - "8080:80"
    volumes:
      # 1. Mount the generated layers so they are accessible via HTTP
      # We map our local folder to a folder inside Nginx
      - ../generated_layers:/usr/share/nginx/html/layers
      
      # 2. (Optional) If you have a custom nginx config, uncomment this:
      # - ../docker/nginx.conf:/etc/nginx/conf.d/default.conf
    networks:
      - sec_net

networks:
  sec_net:
    driver: bridge